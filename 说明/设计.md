

1. 整体结构设计

    对于整个项目均有四个全局单例：用户管理类(UserManager)实例，订单管理类(OrderManager)实例，体育馆数据实例(GymS)单例，分配算法(Allocation)实例。
    
    用户的所有需要的请求，都定义在index.js（controller，后续写到服务器中通过请求获取）中，这些方法通过调用userManager与orderManager对gym数据（model）进行更新，数据的更新造成页面数据的变化（View，后续实现绑定）

    项目的核心在于座位分配算法的实现及扩展，针对这点，我采用了策略模型，所有的allocate方法均封装在controller/allocation下，在运行时可以根据不同的选择使用不同的allocation实例进行座位分配，后续有新的分配方案和限制只需要在这层进行扩展

    针对可能的多用户批量操作，controller中的所有更新操作均会通过/utils/lock.js提供的exec方法实现加锁，保证所有操作均为原子操作且依次执行

1. 数据结构设计

    具体设计考虑写在了每个类的开头

    - 座位数据结构 /model/position/
     
        根据体育馆的结构，分为三个类：体育馆（Gym），馆内区域（Section）及排（Line），在Gym与Section中均有数组存放对应的下属数据结构实例；
        Seat没有独立的类，在Line中通过{ index， seatCount }的方式来对连续座位信息进行压缩，从而减少空间占用，并能较为快速的获取当前Line的空座位与最大连排空座位个数；

    - 用户数据结构设计 /model/user.js

        在需求定义设计中，用户只对应所下的订单，因此用户只保有订单信息及与订单相关的方法，但会通过一个get方法获取所绑定的所有tickets

    - 订单数据结构设计 /model/order.js

        订单绑定了user及ticket信息，一个订单只可对应一个user及1-5张票，且这些数据在确定后不可改变，针对于产品逻辑设计，在数据结构中提供了一个valid字段，可以用来标示订单被取消。订单可以被取消，取消后订单不可以再恢复

    - 票数据结构设计 /model/ticket.js

1. 随机业务逻辑设计 /controller/allocation

1. 代码结构

    面试官您好，因为这个项目是我基于以前自己搭的一个轻量级前端库的快速编写方案库，所以没有提供服务端实现，最后的打包结果也是前端的js文件。我按照传统的MVC分层编写了整个核心部分，前端js则写在example/public下，但因为时间问题来不及迁移到server上了。具体的后续迁移方案和对应的影响，我写在《改进》中了。麻烦您了！
    
    - `src/` 下为服务端（后续）逻辑
        - `index.js` 入口，对外暴露数据请求方法

    - `example/` 前端ui代码 因为目前的ui比较简单，直接采用原生js编写

